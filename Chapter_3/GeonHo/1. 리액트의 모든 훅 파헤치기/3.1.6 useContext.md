# useContext

### useContext란?

부모 / 자식 트리 관계를 가지는 리액트에서 자식에게 전달하려는 props 거리가 멀어질수록 props drilling 현상이 발생하게 된다.

이런 현상을 극복하기 위해 등장한 개념이 `Context`이다.

<br>

### Context 를 함수형 컴포넌트에서 사용할 수 있게 해주는 useContext 훅

```jsx
const Context = createContext<{ hello: string } | undefined>;

function Parent() {
    return (
        <>
            <Context.Provider value={{ hello: 'react' }}>
                <Context.Provider value={{ hello: 'JS' }}>
                    <Child />
                </Context.Provider>
            </Context.Provider>
        </>
    )
}

function Child() {
    const value = useContext(Context);

    return <>{value && value.hello}</>
}

// 결과: 'JS', 'react'가 아니라 'JS'가 리턴된다.
```

<br>

### useContext를 사용할 때 주의할 점

useContext를 함수형 컴포넌트 내부에서 사용할 땐 컴포넌트 재활용이 어려워진다.<br>
useContext가 선언돼 있으면 Provider에 의존성을 가지기 때문이다.

이를 위해 useContext를 사용하는 컴포넌트를 최대한 작게 하거나 재사용되지 않는 컴포넌트에서 사용하는 것을 고려할 수 있다.<br>
또한, 모든 context를 최상위 루트에 둘 수도 있지만, 이는 좋은 접근법은 아닌 듯 하다.<br>

마지막으로, context와 useContext를 상태관리에 사용하는 것이라 생각하는데, 그렇지 않다.<br>
엄밀히 말하자면 context는 상태를 주입해주는 API 이다.<br>

상태 관리 라이브러리가 되기 위해서는 최소한 다음 2가지 조건을 만족해야 한다.

- 어떠한 상태를 기반으로 다른 상태를 만들어 낼 수 있어야 한다.
- 필요에 따라 이러한 상태 변화를 최적화 할 수 있어야 한다.

context는 위 2가지 모두 못한다.<br>
context는 단순히 props 값을 하위로 전달해 줄 뿐.<br>
